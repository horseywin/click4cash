<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click4Cash</title>
    <style>
        /* Dark Minimalist Theme */
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            background: #1e1e1e;
            box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.1);
        }
        h1 {
            font-size: 28px;
        }
        .click-btn {
            background: #ff9800;
            color: white;
            font-size: 24px;
            padding: 20px 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 20px;
        }
        .click-btn:hover {
            background: #e68900;
        }
        .cards {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .card {
            background: #252525;
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            text-align: left;
            margin: 10px;
        }
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #444;
            padding: 5px 0;
        }
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #333;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        .popup button {
            background: #ff9800;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        .navbar {
            display: flex;
            justify-content: flex-end;
            padding: 10px;
            background: #1e1e1e;
        }
        .navbar button {
            background: none;
            color: white;
            border: 1px solid white;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <div class="navbar">
        <button id="loginBtn">Login</button>
        <button id="logoutBtn" style="display:none;">Logout</button>
    </div>

    <div class="container">
        <h1>Click to Win Cash</h1>
        <button class="click-btn" id="clickBtn">Click Me</button>
        <p>Clicks: <span id="clickCount">0</span></p>

        <div class="cards">
            <!-- Leaderboard -->
            <div class="card">
                <h2>Leaderboard</h2>
                <div id="leaderboard"></div>
            </div>

            <!-- Profile -->
            <div class="card">
                <h2>Profile</h2>
                <p>Email: <span id="userEmail">N/A</span></p>
                <p>Playtime: <span id="playTime">0 mins</span></p>
                <p>Joined: <span id="joinDate">N/A</span></p>
            </div>

            <!-- About -->
            <div class="card">
                <h2>About Click4Cash</h2>
                <p>We generate money through ad revenue. 50% of the earnings go back to players as a reward!</p>
            </div>
        </div>
    </div>

    <!-- Popup for Login -->
    <div class="popup" id="loginPopup">
        <p>Please sign in to save your progress!</p>
        <button id="popupLoginBtn">Login</button>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyCQeZ1EOPbHOy8_wOBBvlchZwj8tTCZM2w",
            authDomain: "click4cash-7e106.firebaseapp.com",
            projectId: "click4cash-7e106",
            storageBucket: "click4cash-7e106.firebasestorage.app",
            messagingSenderId: "689145020485",
            appId: "1:689145020485:web:458d083ec5bca7d8b3e32c"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let clickCount = 0;
        const clickBtn = document.getElementById("clickBtn");
        const clickDisplay = document.getElementById("clickCount");

        // Click Event
        clickBtn.addEventListener("click", () => {
            clickCount++;
            clickDisplay.textContent = clickCount;

            if (auth.currentUser) {
                db.collection("users").doc(auth.currentUser.uid).update({
                    clicks: clickCount
                });
            }
        });

        // Auth State Change
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById("loginBtn").style.display = "none";
                document.getElementById("logoutBtn").style.display = "inline";
                document.getElementById("userEmail").textContent = user.email;
                
                db.collection("users").doc(user.uid).get().then(doc => {
                    if (doc.exists) {
                        clickCount = doc.data().clicks || 0;
                        clickDisplay.textContent = clickCount;
                        document.getElementById("joinDate").textContent = doc.data().joined || "N/A";
                    } else {
                        db.collection("users").doc(user.uid).set({
                            clicks: 0,
                            joined: new Date().toLocaleDateString()
                        });
                    }
                });
            } else {
                document.getElementById("loginBtn").style.display = "inline";
                document.getElementById("logoutBtn").style.display = "none";
                document.getElementById("userEmail").textContent = "N/A";
            }
        });

        // Login / Logout
        document.getElementById("loginBtn").addEventListener("click", () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider);
        });

        document.getElementById("logoutBtn").addEventListener("click", () => {
            auth.signOut();
        });

        // Show Login Popup
        setTimeout(() => {
            document.getElementById("loginPopup").style.display = "block";
        }, 3000);

        document.getElementById("popupLoginBtn").addEventListener("click", () => {
            auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
        });
    </script>
</body>
</html>